<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .process { fill: #4A90E2; stroke: #2E5C8A; stroke-width: 2; }
      .datastore { fill: #E8F4F8; stroke: #2E5C8A; stroke-width: 2; }
      .external { fill: #F5A623; stroke: #D68910; stroke-width: 2; }
      .text { font-family: Arial, sans-serif; font-size: 12px; text-anchor: middle; }
      .text-small { font-family: Arial, sans-serif; font-size: 10px; text-anchor: middle; }
      .arrow { stroke: #333; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 10px; fill: #333; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="700" y="30" font-family="Arial" font-size="18" font-weight="bold" text-anchor="middle">Data Flow Diagram - Level 1: PerfumeStore System</text>
  
  <!-- External Entities -->
  <!-- E1: Customer -->
  <rect x="50" y="100" width="100" height="60" class="external" rx="5"/>
  <text x="100" y="130" class="text" font-weight="bold">E1</text>
  <text x="100" y="145" class="text">Customer</text>
  
  <!-- E2: Admin -->
  <rect x="50" y="200" width="100" height="60" class="external" rx="5"/>
  <text x="100" y="230" class="text" font-weight="bold">E2</text>
  <text x="100" y="245" class="text">Admin</text>
  
  <!-- E3: PayOS -->
  <rect x="1250" y="300" width="100" height="60" class="external" rx="5"/>
  <text x="1300" y="330" class="text" font-weight="bold">E3</text>
  <text x="1300" y="345" class="text">PayOS</text>
  
  <!-- E4: Email Service -->
  <rect x="1250" y="500" width="100" height="60" class="external" rx="5"/>
  <text x="1300" y="530" class="text" font-weight="bold">E4</text>
  <text x="1300" y="545" class="text">Email</text>
  <text x="1300" y="555" class="text-small">Service</text>
  
  <!-- Processes -->
  <!-- P1: Product Management -->
  <circle cx="250" cy="130" r="40" class="process"/>
  <text x="250" y="125" class="text" font-weight="bold">P1</text>
  <text x="250" y="140" class="text-small">Product</text>
  <text x="250" y="150" class="text-small">Management</text>
  
  <!-- P2: Cart Management -->
  <circle cx="400" cy="130" r="40" class="process"/>
  <text x="400" y="125" class="text" font-weight="bold">P2</text>
  <text x="400" y="140" class="text-small">Cart</text>
  <text x="400" y="150" class="text-small">Management</text>
  
  <!-- P3: Order Processing -->
  <circle cx="550" cy="130" r="40" class="process"/>
  <text x="550" y="125" class="text" font-weight="bold">P3</text>
  <text x="550" y="140" class="text-small">Order</text>
  <text x="550" y="150" class="text-small">Processing</text>
  
  <!-- P4: Payment Processing -->
  <circle cx="700" cy="130" r="40" class="process"/>
  <text x="700" y="125" class="text" font-weight="bold">P4</text>
  <text x="700" y="140" class="text-small">Payment</text>
  <text x="700" y="150" class="text-small">Processing</text>
  
  <!-- P5: Customer Management -->
  <circle cx="250" cy="300" r="40" class="process"/>
  <text x="250" y="295" class="text" font-weight="bold">P5</text>
  <text x="250" y="310" class="text-small">Customer</text>
  <text x="250" y="320" class="text-small">Management</text>
  
  <!-- P6: Warranty Management -->
  <circle cx="400" cy="300" r="40" class="process"/>
  <text x="400" y="295" class="text" font-weight="bold">P6</text>
  <text x="400" y="310" class="text-small">Warranty</text>
  <text x="400" y="320" class="text-small">Management</text>
  
  <!-- P7: Voucher Management -->
  <circle cx="550" cy="300" r="40" class="process"/>
  <text x="550" y="295" class="text" font-weight="bold">P7</text>
  <text x="550" y="310" class="text-small">Voucher</text>
  <text x="550" y="320" class="text-small">Management</text>
  
  <!-- P8: Admin Management -->
  <circle cx="250" cy="470" r="40" class="process"/>
  <text x="250" y="465" class="text" font-weight="bold">P8</text>
  <text x="250" y="480" class="text-small">Admin</text>
  <text x="250" y="490" class="text-small">Management</text>
  
  <!-- P9: Support & Interaction -->
  <circle cx="400" cy="470" r="40" class="process"/>
  <text x="400" y="465" class="text" font-weight="bold">P9</text>
  <text x="400" y="480" class="text-small">Support &</text>
  <text x="400" y="490" class="text-small">Interaction</text>
  
  <!-- Data Stores -->
  <!-- D1: Products Database -->
  <rect x="200" y="600" width="120" height="60" class="datastore"/>
  <line x1="260" y1="600" x2="260" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="260" y1="660" x2="260" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="260" y="625" class="text" font-weight="bold">D1</text>
  <text x="260" y="640" class="text-small">Products</text>
  <text x="260" y="650" class="text-small">Database</text>
  
  <!-- D2: Customers Database -->
  <rect x="350" y="600" width="120" height="60" class="datastore"/>
  <line x1="410" y1="600" x2="410" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="410" y1="660" x2="410" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="410" y="625" class="text" font-weight="bold">D2</text>
  <text x="410" y="640" class="text-small">Customers</text>
  <text x="410" y="650" class="text-small">Database</text>
  
  <!-- D3: Orders Database -->
  <rect x="500" y="600" width="120" height="60" class="datastore"/>
  <line x1="560" y1="600" x2="560" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="560" y1="660" x2="560" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="560" y="625" class="text" font-weight="bold">D3</text>
  <text x="560" y="640" class="text-small">Orders</text>
  <text x="560" y="650" class="text-small">Database</text>
  
  <!-- D4: Cart Session -->
  <rect x="650" y="600" width="120" height="60" class="datastore"/>
  <line x1="710" y1="600" x2="710" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="710" y1="660" x2="710" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="710" y="625" class="text" font-weight="bold">D4</text>
  <text x="710" y="640" class="text-small">Cart</text>
  <text x="710" y="650" class="text-small">Session</text>
  
  <!-- D5: Vouchers Database -->
  <rect x="800" y="600" width="120" height="60" class="datastore"/>
  <line x1="860" y1="600" x2="860" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="860" y1="660" x2="860" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="860" y="625" class="text" font-weight="bold">D5</text>
  <text x="860" y="640" class="text-small">Vouchers</text>
  <text x="860" y="650" class="text-small">Database</text>
  
  <!-- D6: Warranty Database -->
  <rect x="950" y="600" width="120" height="60" class="datastore"/>
  <line x1="1010" y1="600" x2="1010" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="1010" y1="660" x2="1010" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="1010" y="625" class="text" font-weight="bold">D6</text>
  <text x="1010" y="640" class="text-small">Warranty</text>
  <text x="1010" y="650" class="text-small">Database</text>
  
  <!-- D7: Admin Database -->
  <rect x="1100" y="600" width="120" height="60" class="datastore"/>
  <line x1="1160" y1="600" x2="1160" y2="600" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="1160" y1="660" x2="1160" y2="660" stroke="#2E5C8A" stroke-width="3"/>
  <text x="1160" y="625" class="text" font-weight="bold">D7</text>
  <text x="1160" y="640" class="text-small">Admin</text>
  <text x="1160" y="650" class="text-small">Database</text>
  
  <!-- Data Flows from Customer (E1) -->
  <!-- E1 -> P1 -->
  <path d="M 150 130 L 210 130" class="arrow"/>
  <text x="180" y="125" class="label">Search Request</text>
  
  <!-- E1 -> P2 -->
  <path d="M 150 140 L 360 140" class="arrow"/>
  <text x="255" y="135" class="label">Add to Cart</text>
  
  <!-- E1 -> P3 -->
  <path d="M 150 150 L 510 150" class="arrow"/>
  <text x="330" y="145" class="label">Checkout Request</text>
  
  <!-- E1 -> P5 -->
  <path d="M 150 160 L 210 300" class="arrow"/>
  <text x="180" y="230" class="label">Register/Login</text>
  
  <!-- E1 -> P6 -->
  <path d="M 150 170 L 360 300" class="arrow"/>
  <text x="255" y="235" class="label">Warranty Claim</text>
  
  <!-- E1 -> P7 -->
  <path d="M 150 180 L 510 300" class="arrow"/>
  <text x="330" y="240" class="label">Apply Voucher</text>
  
  <!-- E1 -> P9 -->
  <path d="M 150 190 L 360 470" class="arrow"/>
  <text x="255" y="330" class="label">Support Request</text>
  
  <!-- Data Flows from Admin (E2) -->
  <!-- E2 -> P1 -->
  <path d="M 150 230 L 210 170" class="arrow"/>
  <text x="180" y="200" class="label">Manage Products</text>
  
  <!-- E2 -> P3 -->
  <path d="M 150 240 L 510 170" class="arrow"/>
  <text x="330" y="205" class="label">Manage Orders</text>
  
  <!-- E2 -> P5 -->
  <path d="M 150 250 L 210 340" class="arrow"/>
  <text x="180" y="295" class="label">Manage Customers</text>
  
  <!-- E2 -> P7 -->
  <path d="M 150 260 L 510 340" class="arrow"/>
  <text x="330" y="300" class="label">Manage Vouchers</text>
  
  <!-- E2 -> P8 -->
  <path d="M 150 230 L 210 510" class="arrow"/>
  <text x="180" y="370" class="label">Admin Operations</text>
  
  <!-- Data Flows from Processes to Data Stores -->
  <!-- P1 <-> D1 -->
  <path d="M 250 170 L 260 600" class="arrow"/>
  <text x="255" y="385" class="label">Read/Write</text>
  <path d="M 260 600 L 250 170" class="arrow" stroke-dasharray="5,5"/>
  
  <!-- P2 <-> D4 -->
  <path d="M 400 170 L 710 600" class="arrow"/>
  <text x="555" y="385" class="label">Read/Write</text>
  <path d="M 710 600 L 400 170" class="arrow" stroke-dasharray="5,5"/>
  
  <!-- P2 -> D1 -->
  <path d="M 360 150 L 320 600" class="arrow"/>
  <text x="340" y="375" class="label">Read Product</text>
  
  <!-- P3 -> D3 -->
  <path d="M 550 170 L 560 600" class="arrow"/>
  <text x="555" y="385" class="label">Create Order</text>
  
  <!-- P3 -> D2 -->
  <path d="M 510 150 L 450 600" class="arrow"/>
  <text x="480" y="375" class="label">Read Customer</text>
  
  <!-- P3 -> D4 -->
  <path d="M 590 150 L 680 600" class="arrow"/>
  <text x="635" y="375" class="label">Read Cart</text>
  
  <!-- P3 -> D5 -->
  <path d="M 590 170 L 800 600" class="arrow"/>
  <text x="695" y="385" class="label">Validate Voucher</text>
  
  <!-- P4 -> D3 -->
  <path d="M 700 170 L 560 600" class="arrow"/>
  <text x="630" y="385" class="label">Update Payment</text>
  
  <!-- P4 <-> E3 -->
  <path d="M 740 130 L 1250 330" class="arrow"/>
  <text x="995" y="230" class="label">Payment Request</text>
  <path d="M 1250 330 L 740 130" class="arrow" stroke-dasharray="5,5"/>
  <text x="995" y="220" class="label">Payment Status</text>
  
  <!-- P5 <-> D2 -->
  <path d="M 250 340 L 410 600" class="arrow"/>
  <text x="330" y="470" class="label">Read/Write</text>
  <path d="M 410 600 L 250 340" class="arrow" stroke-dasharray="5,5"/>
  
  <!-- P5 -> E4 -->
  <path d="M 290 300 L 1250 530" class="arrow"/>
  <text x="770" y="415" class="label">Send Email</text>
  
  <!-- P6 <-> D6 -->
  <path d="M 400 340 L 1010 600" class="arrow"/>
  <text x="705" y="470" class="label">Read/Write</text>
  <path d="M 1010 600 L 400 340" class="arrow" stroke-dasharray="5,5"/>
  
  <!-- P6 -> D3 -->
  <path d="M 440 300 L 620 600" class="arrow"/>
  <text x="530" y="450" class="label">Read Order</text>
  
  <!-- P7 <-> D5 -->
  <path d="M 550 340 L 860 600" class="arrow"/>
  <text x="705" y="470" class="label">Read/Write</text>
  <path d="M 860 600 L 550 340" class="arrow" stroke-dasharray="5,5"/>
  
  <!-- P8 <-> D7 -->
  <path d="M 250 510 L 1160 600" class="arrow"/>
  <text x="705" y="555" class="label">Read/Write</text>
  <path d="M 1160 600 L 250 510" class="arrow" stroke-dasharray="5,5"/>
  
  <!-- P8 -> D1 -->
  <path d="M 290 470 L 320 600" class="arrow"/>
  <text x="305" y="535" class="label">Manage Products</text>
  
  <!-- P8 -> D3 -->
  <path d="M 290 490 L 500 600" class="arrow"/>
  <text x="395" y="545" class="label">Manage Orders</text>
  
  <!-- P9 -> D2 -->
  <path d="M 400 510 L 450 600" class="arrow"/>
  <text x="425" y="555" class="label">Read Customer</text>
  
  <!-- P9 -> D3 -->
  <path d="M 440 510 L 620 600" class="arrow"/>
  <text x="530" y="555" class="label">Read Order</text>
  
  <!-- Response flows back to Customer -->
  <!-- P1 -> E1 -->
  <path d="M 210 130 L 150 100" class="arrow" stroke-dasharray="5,5"/>
  <text x="180" y="110" class="label">Product List</text>
  
  <!-- P2 -> E1 -->
  <path d="M 360 120 L 150 110" class="arrow" stroke-dasharray="5,5"/>
  <text x="255" y="115" class="label">Cart Updated</text>
  
  <!-- P3 -> E1 -->
  <path d="M 510 120 L 150 120" class="arrow" stroke-dasharray="5,5"/>
  <text x="330" y="115" class="label">Order Confirmation</text>
  
  <!-- P4 -> E1 -->
  <path d="M 660 120 L 150 130" class="arrow" stroke-dasharray="5,5"/>
  <text x="405" y="125" class="label">Payment Link</text>
  
  <!-- P5 -> E1 -->
  <path d="M 210 300 L 150 140" class="arrow" stroke-dasharray="5,5"/>
  <text x="180" y="220" class="label">Auth Response</text>
  
  <!-- P6 -> E1 -->
  <path d="M 360 280 L 150 150" class="arrow" stroke-dasharray="5,5"/>
  <text x="255" y="215" class="label">Warranty Status</text>
  
  <!-- P7 -> E1 -->
  <path d="M 510 280 L 150 160" class="arrow" stroke-dasharray="5,5"/>
  <text x="330" y="220" class="label">Voucher Applied</text>
  
  <!-- P9 -> E1 -->
  <path d="M 360 450 L 150 180" class="arrow" stroke-dasharray="5,5"/>
  <text x="255" y="315" class="label">Support Response</text>
  
  <!-- Response flows back to Admin -->
  <!-- P1 -> E2 -->
  <path d="M 210 170 L 150 260" class="arrow" stroke-dasharray="5,5"/>
  <text x="180" y="215" class="label">Product Data</text>
  
  <!-- P3 -> E2 -->
  <path d="M 510 170 L 150 270" class="arrow" stroke-dasharray="5,5"/>
  <text x="330" y="220" class="label">Order Data</text>
  
  <!-- P5 -> E2 -->
  <path d="M 210 340 L 150 280" class="arrow" stroke-dasharray="5,5"/>
  <text x="180" y="310" class="label">Customer Data</text>
  
  <!-- P7 -> E2 -->
  <path d="M 510 340 L 150 290" class="arrow" stroke-dasharray="5,5"/>
  <text x="330" y="315" class="label">Voucher Data</text>
  
  <!-- P8 -> E2 -->
  <path d="M 210 510 L 150 250" class="arrow" stroke-dasharray="5,5"/>
  <text x="180" y="380" class="label">Admin Data</text>
  
  <!-- Legend -->
  <rect x="50" y="750" width="1300" height="230" fill="white" stroke="#333" stroke-width="2" rx="5"/>
  <text x="700" y="775" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Legend</text>
  
  <!-- Process -->
  <circle cx="100" cy="810" r="20" class="process"/>
  <text x="140" y="815" class="label" text-anchor="start">Process</text>
  
  <!-- External Entity -->
  <rect x="250" y="790" width="40" height="40" class="external" rx="5"/>
  <text x="300" y="815" class="label" text-anchor="start">External Entity</text>
  
  <!-- Data Store -->
  <rect x="450" y="790" width="40" height="40" class="datastore"/>
  <line x1="470" y1="790" x2="470" y2="790" stroke="#2E5C8A" stroke-width="3"/>
  <line x1="470" y1="830" x2="470" y2="830" stroke="#2E5C8A" stroke-width="3"/>
  <text x="500" y="815" class="label" text-anchor="start">Data Store</text>
  
  <!-- Data Flow -->
  <line x1="600" y1="810" x2="650" y2="810" class="arrow"/>
  <text x="660" y="815" class="label" text-anchor="start">Data Flow (solid = request, dashed = response)</text>
  
  <!-- Process Descriptions -->
  <text x="100" y="860" class="text-small" text-anchor="start">P1: Product Management - Browse, search, view products and categories</text>
  <text x="100" y="875" class="text-small" text-anchor="start">P2: Cart Management - Add, update, remove items from shopping cart</text>
  <text x="100" y="890" class="text-small" text-anchor="start">P3: Order Processing - Create and manage orders, checkout process</text>
  <text x="100" y="905" class="text-small" text-anchor="start">P4: Payment Processing - Handle payment via PayOS gateway</text>
  <text x="100" y="920" class="text-small" text-anchor="start">P5: Customer Management - Registration, login, account management</text>
  <text x="100" y="935" class="text-small" text-anchor="start">P6: Warranty Management - Process warranty claims and tracking</text>
  <text x="100" y="950" class="text-small" text-anchor="start">P7: Voucher Management - Apply and manage discount vouchers</text>
  <text x="100" y="965" class="text-small" text-anchor="start">P8: Admin Management - Admin portal, dashboard, system management</text>
  <text x="100" y="980" class="text-small" text-anchor="start">P9: Support &amp; Interaction - Customer support, comments, chatbot</text>
</svg>

